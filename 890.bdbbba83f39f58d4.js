"use strict";(self.webpackChunkFrontend_Reto_Q=self.webpackChunkFrontend_Reto_Q||[]).push([[890],{6890:(Y,p,r)=>{r.r(p),r.d(p,{QuizModule:()=>U});var a=r(6895),d=r(529),u=r(5808),t=r(8256),h=r(1028),g=r(2091),l=r(9712);let m=(()=>{class n{constructor(e){this.factoryApiService=e}answerTest(e,o,i){return this.factoryApiService.createApiTest().answerTest(e,o,i)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(l.G))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),v=(()=>{class n{constructor(e){this.factoryApiService=e}finishTest(e){return this.factoryApiService.createApiTest().finishTest(e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(l.G))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();r(804);let x=(()=>{class n{constructor(e){this.factoryApiService=e}startTest(e){return this.factoryApiService.createApiTest().startTest(e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(l.G))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var w=r(8850),C=r(507),_=r(619),T=r(362);function y(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-true-or-false",20),t.NdJ("optionsSelectedEvent",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onOptionsSelected(i))}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("sentence",e.currentQuestion.sentence)("options",e.currentQuestion.options)}}function z(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-single-choice",20),t.NdJ("optionsSelectedEvent",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onOptionsSelected(i))}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("sentence",e.currentQuestion.sentence)("options",e.currentQuestion.options)}}function M(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-multiple-choice",20),t.NdJ("optionsSelectedEvent",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onOptionsSelected(i))}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("sentence",e.currentQuestion.sentence)("options",e.currentQuestion.options)}}function Q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6),t._uU(3),t.qZA()(),t.TgZ(4,"div",7)(5,"div",8),t._uU(6),t.qZA()(),t.TgZ(7,"div",9)(8,"div",10)(9,"div",11)(10,"div",12)(11,"div",13),t._uU(12),t.qZA()(),t.TgZ(13,"span"),t._uU(14,":"),t.qZA(),t.TgZ(15,"div",14)(16,"div",13),t._uU(17),t.qZA()()(),t.TgZ(18,"div",15)(19,"div",16),t._uU(20,"minute"),t.qZA(),t.TgZ(21,"div",16),t._uU(22,"second"),t.qZA()()()(),t.TgZ(23,"div",17),t.YNc(24,y,2,2,"div",18),t.YNc(25,z,2,2,"div",18),t.YNc(26,M,2,2,"div",18),t.qZA(),t.TgZ(27,"div")(28,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSendAnswer())}),t._uU(29,"Send response"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(3),t.hij("Level: ",e.switchUseCase.choiceViewLevel(e.currentQuestion.level),""),t.xp6(3),t.hij("",e.progress," out of 15"),t.xp6(6),t.Oqu(e.formatTime(e.countdown).split(" ")[1]),t.xp6(5),t.Oqu(e.formatTime(e.countdown).split(" ")[2]),t.xp6(7),t.Q6J("ngIf","truefalse"===e.currentQuestion.type),t.xp6(1),t.Q6J("ngIf","unique"===e.currentQuestion.type),t.xp6(1),t.Q6J("ngIf","multiple"===e.currentQuestion.type)}}function O(n,s){1&n&&(t.TgZ(0,"div",21)(1,"h1"),t._uU(2,"Congratulations!"),t.qZA(),t.TgZ(3,"p"),t._uU(4," You have finished the test, then we will"),t._UZ(5,"br"),t._uU(6," send you an email with your results."),t._UZ(7,"br"),t._uU(8," Thank you! "),t.qZA()())}const P=[{path:"",children:[{path:"app-quiz",component:(()=>{class n{constructor(e,o,i,c,f,q,F){this.quizService=e,this.answerTestUseCase=o,this.finishTestUseCase=i,this.startTestUseCase=c,this.router=f,this.notificationService=q,this.switchUseCase=F,this.switchCongratulations=!1,this.now=Date.now()}ngOnInit(){this.quizService.getData().subscribe(i=>{if(JSON.stringify(this.quiz)!==JSON.stringify(i.quiz)){this.quiz=i.quiz,this.token=i.token,this.progress=this.calculateProgress();const c=this.quiz.questions?.find(f=>!1===f.answered);c&&(this.currentQuestion=c.question),!this.quiz?.started_at&&!!this.token&&this.startTest(),""===i.token&&this.router.navigate(["app-home"])}}),this.progress=this.calculateProgress(),this.quiz?.started_at&&(this.now=new Date(this.quiz?.started_at).getTime()+40427);const e=new Date(this.now),o=Math.floor((Date.now()-e.getTime())/1e3);this.countdown=o>0?3600-o:3600,this.startCountdown()}onSendAnswer(){this.answer&&this.answerTestUseCase.answerTest(this.token,this.questionSentence,this.answer).subscribe({next:e=>{this.quizService.setData(this.token,e)},error:e=>this.notificationService.showMessage("Error",e.error.message,"error")}),!!this.answer&&15===this.progress&&this.finishTest(),this.answer&&15===this.progress&&(this.switchCongratulations=!0)}onOptionsSelected(e){this.answer=e,this.questionSentence=this.currentQuestion.sentence}startTest(){this.startTestUseCase.startTest(this.token).subscribe()}finishTest(){this.finishTestUseCase.finishTest(this.token).subscribe()}calculateScore(){return this.quiz.questions?.reduce((e,o)=>e+o.points,0)}calculateProgress(){return this.quiz.questions?.reduce((e,o)=>e+(o.answered?1:0),0)+1}startCountdown(){this.intervalId=setInterval(()=>{this.countdown--,this.countdown<=0&&(clearInterval(this.intervalId),this.finishTest(),this.notificationService.showMessage("Test finished!","Your time is over, you will receive an email with your score.","warning"),this.router.navigate(["app-home"]))},1e3)}formatTime(e){return`${Math.floor(e%86400/3600)} ${Math.floor(e%3600/60)} ${e%60}`}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.v),t.Y36(m),t.Y36(v),t.Y36(x),t.Y36(u.F0),t.Y36(h.g),t.Y36(w.E))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-quiz"]],inputs:{quiz:"quiz"},decls:4,vars:2,consts:[[1,"home"],[1,"cover"],["class","content",4,"ngIf"],["class","contentBye",4,"ngIf"],[1,"content"],[1,"div-countdown-level"],[1,"countdown-level"],[1,"countdown-progress"],[1,"countdown-label"],[1,"countdown"],[1,"countdown-timer"],[1,"countdown-time"],[1,"time-box","minutes"],[1,"time-value"],[1,"time-box","seconds"],[1,"unit"],[1,"time-label"],[1,"altruista"],[4,"ngIf"],["type","button",1,"btn-home1",3,"click"],[3,"sentence","options","optionsSelectedEvent"],[1,"contentBye"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0)(1,"div",1),t.YNc(2,Q,30,7,"div",2),t.YNc(3,O,9,0,"div",3),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",o.currentQuestion&&!o.switchCongratulations),t.xp6(1),t.Q6J("ngIf",o.switchCongratulations))},dependencies:[a.O5,C.A,_.u,T.$],styles:[".home[_ngcontent-%COMP%]{width:100%;height:100vh;background-image:url(https://images.unsplash.com/photo-1620207418302-439b387441b0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1934&q=80);background-size:cover;background-position:center}.cover[_ngcontent-%COMP%]{width:100%;height:100vh;background-color:#ffffff27;display:flex;justify-content:center}.div-countdown-level[_ngcontent-%COMP%]{width:100%;height:25PX;display:flex;justify-content:right;margin-bottom:15PX}.countdown-level[_ngcontent-%COMP%]{font-size:32px;font-weight:bolder;color:#fff;text-transform:uppercase;font-family:Helvetica;padding-right:10px;justify-content:right;margin-bottom:10PX}.countdown-progress[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:right;margin-bottom:0}.countdown-label[_ngcontent-%COMP%]{font-size:18px;font-weight:bolder;color:#fff;text-transform:uppercase;font-family:Helvetica;padding-right:13px}.content[_ngcontent-%COMP%]{text-align:center;font-size:19px;color:#000;font-family:Helvetica;margin-bottom:20px;width:100%;height:50%;margin-top:10px}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:104px}.altruista[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.countdown[_ngcontent-%COMP%]{color:#fff;padding-bottom:60PX}.contentBye[_ngcontent-%COMP%]{text-align:center;font-size:20px;color:#fff;font-family:Helvetica;margin-bottom:0;margin-top:190px;width:70%;height:50%}.contentBye[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:130px}.btn-home1[_ngcontent-%COMP%]{width:1000px;height:48px;background-color:#012d31;color:#13ffd8;font-size:17px;text-transform:uppercase;margin-top:0;border:none;border-radius:10px}.btn-home1[_ngcontent-%COMP%]:hover{background-color:#8938ec;color:#f8faf8}.countdown-time[_ngcontent-%COMP%]{display:flex;justify-content:center}.time-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:70px;height:70px;border-radius:5px;background-color:#0000006e}.time-value[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:#fff}.time-label[_ngcontent-%COMP%]{font-size:14px;font-weight:bolder;color:#fffffffb;text-transform:uppercase;margin-top:8px;text-align:center;font-family:Helvetica}.countdown-time[_ngcontent-%COMP%]   .time-box[_ngcontent-%COMP%]:not(:last-child){margin-right:0}.countdown-time[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:44px;font-weight:700;color:#fff;margin:0 10px}.unit[_ngcontent-%COMP%]{display:flex;justify-content:center}.unit[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]{margin:0;padding:0}.unit[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]:not(:last-child){margin-right:46px;margin-left:6px}"]}),n})()},{path:"**",component:r(232).O}]}];let A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.ez,u.Bz.forChild(P),u.Bz]}),n})();var Z=r(5321);let U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.ez,d.JF,A,Z.QuestionModule]}),n})()}}]);